<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>client</title>
</head>
<body>

</body>
</html>
<script src="lib/signalr.js"></script>
<script src="lib/globalConfig.js"></script>
<script type="text/javascript">
    var url = URLBASE + "/client";
    const connection = new signalR.HubConnectionBuilder()
        .withUrl(url, {
            skipNegotiation: true,
            transport: signalR.HttpTransportType.WebSockets
        })
        .build();

    connection.on("onConnect", (message) => {
        console.log(`connectionId=${message}`);
        //addMsgWithAvator(user, message);
    });

    connection.on("ReceiveMessage", (user, message) => {
        console.log(`${user}: ${message}`);
        addMsgWithAvator(user, message);
    });

    $('document').ready(() => {
        connection.start().catch(err => console.error(err.toString()));
    })
</script>